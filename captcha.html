<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VerificaciÃ³n de Seguridad - CAPTCHA</title>
    <style>
        body { 
            font-family: sans-serif; 
            background-color: #f0f0f0; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            min-height: 100vh; 
            margin: 0; 
            text-align: center; 
        }
        .container { 
            background-color: white; 
            padding: 40px; 
            border-radius: 10px; 
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); 
            max-width: 500px; 
            width: 90%; 
        }
        h1 { 
            color: #f39c12; 
            margin-bottom: 25px; 
            border-bottom: 2px solid #f39c12;
            padding-bottom: 10px;
        }
        .pregunta { 
            font-size: 1.2em; 
            margin-bottom: 20px; 
            font-weight: bold; 
        }
        #opciones-container button {
            background-color: #e67e22;
            color: white;
            border: none;
            padding: 12px 25px;
            margin: 8px;
            cursor: pointer;
            border-radius: 5px;
            font-size: 1em;
            transition: background-color 0.3s;
            width: 90%;
            max-width: 250px;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
        #opciones-container button:hover:not(:disabled) { 
            background-color: #d35400; 
        }
        #opciones-container button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        #mensaje-resultado { 
            margin-top: 20px; 
            font-size: 1.2em; 
            min-height: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>DesafÃ­o de DÃ­a de Muertos ðŸ’€</h1>
        <p>Responde la siguiente pregunta de cultura general mexicana para acceder:</p>
        
        <div id="pregunta-texto" class="pregunta"></div>
        <div id="opciones-container"></div>
        
        <div id="mensaje-resultado"></div>
    </div>

    <script src="config.js"></script> 
    
    <script>
        const preguntas = [
            // =========================================================================
            // ðŸš¨ LISTA COMPLETA DE PREGUNTAS DE DÃA DE MUERTOS ðŸš¨
            // =========================================================================
            { pregunta: "Â¿CuÃ¡l es la flor principal usada para decorar el altar y guiar a los difuntos?", opciones: ["Rosa", "Girasol", "CempasÃºchil", "OrquÃ­dea"], respuesta: "CempasÃºchil" },
            { pregunta: "Â¿QuÃ© dulce tradicionalmente tiene forma de calavera?", opciones: ["Ate de fruta", "MazapÃ¡n", "Calavera de azÃºcar", "TurrÃ³n"], respuesta: "Calavera de azÃºcar" },
            { pregunta: "Â¿CÃ³mo se llama el pan especial que se hornea para esta fiesta?", opciones: ["Pan de elote", "Pan de muerto", "Pan dulce", "Birote"], respuesta: "Pan de muerto" },
            { pregunta: "Â¿QuÃ© figura es comÃºn ver en el altar con forma de esqueleto elegante?", opciones: ["Llorona", "Catrina", "Nahual", "Tlaloc"], respuesta: "Catrina" },
            { pregunta: "Â¿En quÃ© dÃ­a se conmemora a los niÃ±os difuntos (angelitos)?", opciones: ["31 de octubre", "1 de noviembre", "2 de noviembre", "24 de diciembre"], respuesta: "1 de noviembre" },
            { pregunta: "Â¿QuÃ© elemento del altar se usa para purificar el ambiente?", opciones: ["Agua", "Sal", "Incienso o copal", "Velas"], respuesta: "Incienso o copal" },
            { pregunta: "Â¿CuÃ¡l es el propÃ³sito de poner un vaso de agua en el altar?", opciones: ["Para los vivos", "Para el cafÃ©", "Para calmar la sed del alma", "Para lavar la fruta"], respuesta: "Para calmar la sed del alma" },
            { pregunta: "Â¿CuÃ¡ntos niveles puede tener un altar de muertos tradicional?", opciones: ["Uno o dos", "Siete", "Diez", "Cinco"], respuesta: "Siete" },
            { pregunta: "Â¿QuÃ© animal mÃ­tico o real se cree que guÃ­a a las almas?", opciones: ["Ãguila", "Xoloitzcuintle", "Serpiente", "Coyote"], respuesta: "Xoloitzcuintle" },
            { pregunta: "Â¿CÃ³mo se le llama a los versos humorÃ­sticos sobre la muerte y personas vivas?", opciones: ["Rondas", "Villancicos", "Calaveritas literarias", "Romances"], respuesta: "Calaveritas literarias" },
            { pregunta: "Â¿QuÃ© civilizaciÃ³n prehispÃ¡nica tenÃ­a una diosa de la muerte llamada MictecacÃ­huatl?", opciones: ["Maya", "Olmeca", "Azteca (Mexica)", "Inca"], respuesta: "Azteca (Mexica)" },
            { pregunta: "Â¿QuÃ© objeto representa la conexiÃ³n entre el cielo y la tierra en el altar?", opciones: ["El espejo", "El papel picado", "La foto", "El plato de mole"], respuesta: "El papel picado" },
            { pregunta: "Â¿QuÃ© se pone en el altar si la persona falleciÃ³ ahogada?", opciones: ["Una toalla", "Un jabÃ³n", "Una figura de pez", "Un vaso de agua"], respuesta: "Una figura de pez" },
            { pregunta: "Â¿En quÃ© estado mexicano es famoso el festival de 'La Calaca'?", opciones: ["Oaxaca", "Puebla", "Guanajuato", "YucatÃ¡n"], respuesta: "Guanajuato" },
            { pregunta: "Â¿QuÃ© alimento se coloca para representar la ofrenda indÃ­gena?", opciones: ["Pan Bimbo", "Tortillas", "Tamales", "Sopa"], respuesta: "Tamales" },
            { pregunta: "Â¿QuÃ© fruta de temporada es comÃºn en los altares?", opciones: ["Manzana", "Naranja o Mandarina", "PlÃ¡tano", "Mango"], respuesta: "Naranja o Mandarina" },
            { pregunta: "Â¿QuÃ© nombre reciben las flores de CempasÃºchil en nÃ¡huatl?", opciones: ["Flor de Sol", "Flor de Veinte PÃ©talos", "Flor de Fuego", "Flor de Arena"], respuesta: "Flor de Veinte PÃ©talos" },
            { pregunta: "Â¿DÃ³nde se origina la tradiciÃ³n de 'La Catrina'?", opciones: ["Ciudad de MÃ©xico", "Aguascalientes", "MichoacÃ¡n", "Veracruz"], respuesta: "Aguascalientes" },
            { pregunta: "Â¿QuiÃ©n popularizÃ³ la imagen de La Catrina en murales?", opciones: ["Frida Kahlo", "Diego Rivera", "JosÃ© Guadalupe Posada", "David Alfaro Siqueiros"], respuesta: "Diego Rivera" },
            { pregunta: "Â¿QuÃ© significa el tÃ©rmino 'MictlÃ¡n'?", opciones: ["El Cielo", "El Inframundo azteca", "El Altar", "El PanteÃ³n"], respuesta: "El Inframundo azteca" }
            // Puedes aÃ±adir mÃ¡s preguntas aquÃ­ para llegar a 30 o mÃ¡s
            // =========================================================================
        ];

        let preguntaActual = {};
        const preguntaTexto = document.getElementById('pregunta-texto');
        const opcionesContainer = document.getElementById('opciones-container');
        const mensajeResultado = document.getElementById('mensaje-resultado');

        function seleccionarPregunta() {
            // Asegura que haya preguntas disponibles
            if (preguntas.length === 0) {
                preguntaTexto.textContent = "Error: No hay preguntas cargadas.";
                return;
            }

            // Selecciona una pregunta al azar
            const indice = Math.floor(Math.random() * preguntas.length);
            preguntaActual = preguntas[indice];
            preguntaTexto.textContent = preguntaActual.pregunta;
            
            opcionesContainer.innerHTML = '';
            
            // Crea los botones de opciones
            preguntaActual.opciones.forEach(opcion => {
                const boton = document.createElement('button');
                boton.textContent = opcion;
                boton.onclick = () => verificarRespuesta(opcion);
                opcionesContainer.appendChild(boton);
            });
            
            mensajeResultado.textContent = '';
        }

        function verificarRespuesta(seleccion) {
            const botones = opcionesContainer.querySelectorAll('button');
            botones.forEach(btn => btn.disabled = true); // Desactiva botones al responder

            if (seleccion === preguntaActual.respuesta) {
                mensajeResultado.textContent = "Â¡Correcto! Acceso concedido. âœ… Redirigiendo...";
                mensajeResultado.style.color = '#2ecc71';
                
                // *** ACCIÃ“N CLAVE: Otorga el token de acceso ***
                localStorage.setItem('content_access_token', 'granted');
                
                setTimeout(() => { 
                    // Redirige al destino final (index.html), obtenido de config.js
                    window.location.href = FINAL_DESTINATION; 
                }, 1500);

            } else {
                mensajeResultado.textContent = "Incorrecto. Intenta de nuevo. âŒ";
                mensajeResultado.style.color = '#e74c3c';
                
                // Vuelve a cargar otra pregunta despuÃ©s de un breve tiempo
                setTimeout(() => {
                    seleccionarPregunta();
                }, 1500); 
            }
        }

        window.onload = seleccionarPregunta;
    </script>
</body>
</html>
