<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verificación de Seguridad - CAPTCHA</title>
    <style>
        body { 
            font-family: sans-serif; 
            background-color: #f0f0f0; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            min-height: 100vh; 
            margin: 0; 
            text-align: center; 
        }
        .container { 
            background-color: white; 
            padding: 40px; 
            border-radius: 10px; 
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); 
            max-width: 500px; 
            width: 90%; 
        }
        h1 { 
            color: #f39c12; 
            margin-bottom: 25px; 
            border-bottom: 2px solid #f39c12;
            padding-bottom: 10px;
        }
        .pregunta { 
            font-size: 1.2em; 
            margin-bottom: 20px; 
            font-weight: bold; 
        }
        #opciones-container button {
            background-color: #e67e22;
            color: white;
            border: none;
            padding: 12px 25px;
            margin: 8px;
            cursor: pointer;
            border-radius: 5px;
            font-size: 1em;
            transition: background-color 0.3s;
            width: 90%;
            max-width: 250px;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
        #opciones-container button:hover:not(:disabled) { 
            background-color: #d35400; 
        }
        #opciones-container button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        #mensaje-resultado { 
            margin-top: 20px; 
            font-size: 1.2em; 
            min-height: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Desafío de Día de Muertos 💀</h1>
        <p>Responde la siguiente pregunta de cultura general mexicana para acceder:</p>
        
        <div id="pregunta-texto" class="pregunta"></div>
        <div id="opciones-container"></div>
        
        <div id="mensaje-resultado"></div>
    </div>

    <script src="config.js"></script> 
    
    <script>
        const preguntas = [
            // =========================================================================
            // 🚨 LISTA COMPLETA DE PREGUNTAS DE DÍA DE MUERTOS 🚨
            // =========================================================================
            { pregunta: "¿Cuál es la flor principal usada para decorar el altar y guiar a los difuntos?", opciones: ["Rosa", "Girasol", "Cempasúchil", "Orquídea"], respuesta: "Cempasúchil" },
            { pregunta: "¿Qué dulce tradicionalmente tiene forma de calavera?", opciones: ["Ate de fruta", "Mazapán", "Calavera de azúcar", "Turrón"], respuesta: "Calavera de azúcar" },
            { pregunta: "¿Cómo se llama el pan especial que se hornea para esta fiesta?", opciones: ["Pan de elote", "Pan de muerto", "Pan dulce", "Birote"], respuesta: "Pan de muerto" },
            { pregunta: "¿Qué figura es común ver en el altar con forma de esqueleto elegante?", opciones: ["Llorona", "Catrina", "Nahual", "Tlaloc"], respuesta: "Catrina" },
            { pregunta: "¿En qué día se conmemora a los niños difuntos (angelitos)?", opciones: ["31 de octubre", "1 de noviembre", "2 de noviembre", "24 de diciembre"], respuesta: "1 de noviembre" },
            { pregunta: "¿Qué elemento del altar se usa para purificar el ambiente?", opciones: ["Agua", "Sal", "Incienso o copal", "Velas"], respuesta: "Incienso o copal" },
            { pregunta: "¿Cuál es el propósito de poner un vaso de agua en el altar?", opciones: ["Para los vivos", "Para el café", "Para calmar la sed del alma", "Para lavar la fruta"], respuesta: "Para calmar la sed del alma" },
            { pregunta: "¿Cuántos niveles puede tener un altar de muertos tradicional?", opciones: ["Uno o dos", "Siete", "Diez", "Cinco"], respuesta: "Siete" },
            { pregunta: "¿Qué animal mítico o real se cree que guía a las almas?", opciones: ["Águila", "Xoloitzcuintle", "Serpiente", "Coyote"], respuesta: "Xoloitzcuintle" },
            { pregunta: "¿Cómo se le llama a los versos humorísticos sobre la muerte y personas vivas?", opciones: ["Rondas", "Villancicos", "Calaveritas literarias", "Romances"], respuesta: "Calaveritas literarias" },
            { pregunta: "¿Qué civilización prehispánica tenía una diosa de la muerte llamada Mictecacíhuatl?", opciones: ["Maya", "Olmeca", "Azteca (Mexica)", "Inca"], respuesta: "Azteca (Mexica)" },
            { pregunta: "¿Qué objeto representa la conexión entre el cielo y la tierra en el altar?", opciones: ["El espejo", "El papel picado", "La foto", "El plato de mole"], respuesta: "El papel picado" },
            { pregunta: "¿Qué se pone en el altar si la persona falleció ahogada?", opciones: ["Una toalla", "Un jabón", "Una figura de pez", "Un vaso de agua"], respuesta: "Una figura de pez" },
            { pregunta: "¿En qué estado mexicano es famoso el festival de 'La Calaca'?", opciones: ["Oaxaca", "Puebla", "Guanajuato", "Yucatán"], respuesta: "Guanajuato" },
            { pregunta: "¿Qué alimento se coloca para representar la ofrenda indígena?", opciones: ["Pan Bimbo", "Tortillas", "Tamales", "Sopa"], respuesta: "Tamales" },
            { pregunta: "¿Qué fruta de temporada es común en los altares?", opciones: ["Manzana", "Naranja o Mandarina", "Plátano", "Mango"], respuesta: "Naranja o Mandarina" },
            { pregunta: "¿Qué nombre reciben las flores de Cempasúchil en náhuatl?", opciones: ["Flor de Sol", "Flor de Veinte Pétalos", "Flor de Fuego", "Flor de Arena"], respuesta: "Flor de Veinte Pétalos" },
            { pregunta: "¿Dónde se origina la tradición de 'La Catrina'?", opciones: ["Ciudad de México", "Aguascalientes", "Michoacán", "Veracruz"], respuesta: "Aguascalientes" },
            { pregunta: "¿Quién popularizó la imagen de La Catrina en murales?", opciones: ["Frida Kahlo", "Diego Rivera", "José Guadalupe Posada", "David Alfaro Siqueiros"], respuesta: "Diego Rivera" },
            { pregunta: "¿Qué significa el término 'Mictlán'?", opciones: ["El Cielo", "El Inframundo azteca", "El Altar", "El Panteón"], respuesta: "El Inframundo azteca" }
            // Puedes añadir más preguntas aquí para llegar a 30 o más
            // =========================================================================
        ];

        let preguntaActual = {};
        const preguntaTexto = document.getElementById('pregunta-texto');
        const opcionesContainer = document.getElementById('opciones-container');
        const mensajeResultado = document.getElementById('mensaje-resultado');

        function seleccionarPregunta() {
            // Asegura que haya preguntas disponibles
            if (preguntas.length === 0) {
                preguntaTexto.textContent = "Error: No hay preguntas cargadas.";
                return;
            }

            // Selecciona una pregunta al azar
            const indice = Math.floor(Math.random() * preguntas.length);
            preguntaActual = preguntas[indice];
            preguntaTexto.textContent = preguntaActual.pregunta;
            
            opcionesContainer.innerHTML = '';
            
            // Crea los botones de opciones
            preguntaActual.opciones.forEach(opcion => {
                const boton = document.createElement('button');
                boton.textContent = opcion;
                boton.onclick = () => verificarRespuesta(opcion);
                opcionesContainer.appendChild(boton);
            });
            
            mensajeResultado.textContent = '';
        }

        function verificarRespuesta(seleccion) {
            const botones = opcionesContainer.querySelectorAll('button');
            botones.forEach(btn => btn.disabled = true); // Desactiva botones al responder

            if (seleccion === preguntaActual.respuesta) {
                mensajeResultado.textContent = "¡Correcto! Acceso concedido. ✅ Redirigiendo...";
                mensajeResultado.style.color = '#2ecc71';
                
                // *** ACCIÓN CLAVE: Otorga el token de acceso ***
                localStorage.setItem('content_access_token', 'granted');
                
                setTimeout(() => { 
                    // Redirige al destino final (index.html), obtenido de config.js
                    window.location.href = FINAL_DESTINATION; 
                }, 1500);

            } else {
                mensajeResultado.textContent = "Incorrecto. Intenta de nuevo. ❌";
                mensajeResultado.style.color = '#e74c3c';
                
                // Vuelve a cargar otra pregunta después de un breve tiempo
                setTimeout(() => {
                    seleccionarPregunta();
                }, 1500); 
            }
        }

        window.onload = seleccionarPregunta;
    </script>
</body>
</html>
